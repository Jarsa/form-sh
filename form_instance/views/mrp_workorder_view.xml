<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <record model="ir.ui.view" id="view_mrp_workorder_inherit_custom_kanban">
        <field name="name">view.mrp.workorder.inherit.custom.kanban</field>
        <field name="model">mrp.workorder</field>
        <field name="inherit_id" ref="mrp.workcenter_line_kanban"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='product_uom_id']" position="after">
                <field name="date_planned_start"/>
                <field name="production_id" invisible="1"/>
            </xpath>
            <xpath expr="//div[hasclass('oe_kanban_content')]" position="inside">
                <div>
                    <strong><span>Date Planned Start - </span></strong><span><t t-esc="record.date_planned_start.value"/></span>
                </div>
            </xpath>
        </field>
    </record>
    <record id="mrp_workorder.mrp_workorder_action_tablet" model="ir.actions.act_window">
        <field name="domain">[('state', 'not in', ['done', 'cancel']), ('workcenter_id','=',active_id), '|', ('production_availability', '=', 'assigned'), ('allow_start_production', '=', True)]</field>
    </record>
    <record model="ir.ui.view" id="mrp_workorder_custom_form">
        <field name="name">mrp_workorder_custom.form</field>
        <field name="model">mrp.workorder</field>
        <field name="priority">110</field>
        <field name="inherit_id" ref="mrp_workorder.mrp_workorder_view_form_inherit_workorder"/>
        <field name="arch" type="xml">
            <xpath expr="//button[@name='open_tablet_view']" position="replace">
                <field name="production_availability" invisible="1"/>
                <field name="allow_start_production" invisible="1"/>
                <button name="open_tablet_view" type="object" string="Process" attrs="{'invisible': ['|', '|', ('state', 'not in', ('ready', 'progress')), ('production_availability', '!=', 'assigned'), ('allow_start_production', '=', True)]}"/>
                <button name="open_tablet_view" type="object" string="Process" attrs="{'invisible': [('allow_start_production', '=', False)]}"/>
            </xpath>
        </field>
    </record>
    <record model="ir.ui.view" id="mrp_workcenter_custom_chatter_form">
        <field name="name">mrp.workcenter.custom.chatter.form</field>
        <field name="model">mrp.workcenter</field>
        <field name="inherit_id" ref="mrp.mrp_workcenter_view"/>
        <field name="arch" type="xml">
            <xpath expr="//form[1]" position="inside">
                <div class="oe_chatter">
                    <field name="message_follower_ids" widget="mail_followers"/>
                    <field name="message_ids" widget="mail_thread"/>
                </div>
            </xpath>
             <xpath expr="//field[@name='costs_hour']" position="after">
                <field name="allow_start_production"/>
            </xpath>
        </field>
    </record>
    <record model="ir.ui.view" id="mrp_workorder_view_form_tablet_form">
        <field name="name">mrp.workorder.custom2.form</field>
        <field name="model">mrp.workorder</field>
        <field name="inherit_id" ref="mrp_workorder.mrp_workorder_view_form_tablet"/>
        <field name="arch" type="xml">
            <xpath expr="//div[hasclass('workorder_bar')]" position="inside">
                <field name="product_description" class="oe_inline"/>
            </xpath>
            <xpath expr="//h3/field[@name='product_id']" position="after">
                <field name="product_description" class="oe_inline"/>
            </xpath>
            <xpath expr="//button[@name='action_open_manufacturing_order']" position="attributes">
                <attribute name="string">Done and Close MO</attribute>
            </xpath>
        </field>
    </record>
    <record model="ir.ui.view" id="mrp_workorder_custom_form2">
        <field name="name">mrp_workorder_custom.form2</field>
        <field name="model">mrp.workorder</field>
        <field name="priority">110</field>
        <field name="inherit_id" ref="mrp.mrp_production_workorder_form_view_inherit"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='product_id']" position="after">
                <field name="allow_start_production"/>
            </xpath>
        </field>
    </record>
    <menuitem id="menu_workcenter_root" name="Workcenter" action="mrp.mrp_workcenter_kanban_action" groups="form_instance.group_mrp_workcenter_form" sequence="30" web_icon="base,static/description/board.png"/>
</odoo>
